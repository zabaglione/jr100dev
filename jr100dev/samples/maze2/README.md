# MAZE2 サンプル (WIP)

## 概要
- MAZE をベースに、1 タイル = 3×3 文字で描画する迷路アクションの試作中バージョンです。
- 起動・レベル選択 (`I` / `M` / `Z`) は従来と同じですが、全レベルがスクロール表現になります。
- 現時点では迷路生成と 3×3 タイル描画、スクロール処理、アイテム配置・タイマー・HUD 更新まで実装済みです。
- 敵・アイテム・銃撃・タイマーなどのゲームロジックは実装途中のため、今後の更新で追加予定です。
- 実装方針や注意点は `docs/maze2_design.md` にまとめています。作業前に必ず参照してください。

## ビルド
```sh
make -C samples/maze2
```
- `Makefile` が `main.asm` / `maze_data.asm` / `maze_gen.asm` を組み合わせて `build/maze.prg` を生成します。
- `common.inc` を編集した場合は依存関係が追跡されるため、通常の `make build/maze.prg` で再アセンブルされます。挙動に違和感があれば `make clean` からやり直してください。

## 実行
1. `samples/maze2/build/maze.prg` を JR-100 エミュレーターにロードし、`A=USR($300)` を実行します。
2. タイトル画面で `I` / `M` でレベルを選択し、`Z` キーで開始します。
3. ゲーム中は `I` / `J` / `K` / `M` で移動できます。3×3 表示のため全レベルがスクロールし、視界がタイル単位で移動します。
4. 現在はゴールやタイマー演出が未実装のため、迷路探索用のテックデモとして利用してください。

## メモ
- タイル描画は `MAZE_RENDER_VIEW`／`MAZE_DRAW_TILE_BASE` に集約しました。敵・アイテムを描画する際は同ロジックを再利用してください。
- VRAM 空白は `$40` を使用します。`__STD_TO_VRAM` を通さない ASCII 空白 (`$20`) は表示されません。
- 追加要素を実装する際は RAM 使用量が `$0300-$3FFF` に収まっているかこまめに確認してください。
